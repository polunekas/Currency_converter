{"ast":null,"code":"import _slicedToArray from\"/Users/polina/Desktop/js/Currency_converter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{Block}from\"./Block\";import\"./index.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(\"RUB\"),_React$useState2=_slicedToArray(_React$useState,2),fromCurrency=_React$useState2[0],setFromCurrency=_React$useState2[1];var _React$useState3=React.useState(\"USD\"),_React$useState4=_slicedToArray(_React$useState3,2),toCurrency=_React$useState4[0],setToCurrency=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),fromPrice=_React$useState6[0],setFromPrice=_React$useState6[1];var _React$useState7=React.useState(1),_React$useState8=_slicedToArray(_React$useState7,2),toPrice=_React$useState8[0],setToPrice=_React$useState8[1];//   const [rates, setRates] = React.useState({})\nvar ratesRef=React.useRef({});React.useEffect(function(){fetch(\"https://cdn.cur.su/api/latest.json\").then(function(res){return res.json();}).then(function(json){// setRates(json.rates)\nratesRef.current=json.rates;onChangeToPrice(1);}).catch(function(err){console.warn(err);alert(\"Не удалось получить информацию\");});},[]);var onChangeFromPrice=function onChangeFromPrice(value){var price=value/ratesRef.current[fromCurrency];var result=price*ratesRef.current[toCurrency];setToPrice(result.toFixed(3));setFromPrice(value);};var onChangeToPrice=function onChangeToPrice(value){var result=ratesRef.current[fromCurrency]/ratesRef.current[toCurrency]*value;setFromPrice(result.toFixed(3));setToPrice(value);};React.useEffect(function(){onChangeFromPrice(fromPrice);},[fromCurrency]);React.useEffect(function(){onChangeToPrice(toPrice);},[toCurrency]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Block,{value:fromPrice,currency:fromCurrency,onChangeCurrency:function onChangeCurrency(cur){return setFromCurrency(cur);},onChangeValue:onChangeFromPrice}),/*#__PURE__*/_jsx(Block,{value:toPrice,currency:toCurrency,onChangeCurrency:function onChangeCurrency(cur){return setToCurrency(cur);},onChangeValue:onChangeToPrice})]});}export default App;","map":{"version":3,"names":["React","Block","App","useState","fromCurrency","setFromCurrency","toCurrency","setToCurrency","fromPrice","setFromPrice","toPrice","setToPrice","ratesRef","useRef","useEffect","fetch","then","res","json","current","rates","onChangeToPrice","catch","err","console","warn","alert","onChangeFromPrice","value","price","result","toFixed","cur"],"sources":["/Users/polina/Desktop/js/Currency_converter/src/App.js"],"sourcesContent":["import React from \"react\"\nimport { Block } from \"./Block\"\nimport \"./index.scss\"\n\nfunction App() {\n  const [fromCurrency, setFromCurrency] = React.useState(\"RUB\")\n  const [toCurrency, setToCurrency] = React.useState(\"USD\")\n  const [fromPrice, setFromPrice] = React.useState(0)\n  const [toPrice, setToPrice] = React.useState(1)\n\n  //   const [rates, setRates] = React.useState({})\n  const ratesRef = React.useRef({})\n  React.useEffect(() => {\n    fetch(\"https://cdn.cur.su/api/latest.json\")\n      .then((res) => res.json())\n      .then((json) => {\n        // setRates(json.rates)\n        ratesRef.current = json.rates\n        onChangeToPrice(1)\n      })\n      .catch((err) => {\n        console.warn(err)\n        alert(\"Не удалось получить информацию\")\n      })\n  }, [])\n\n  const onChangeFromPrice = (value) => {\n    const price = value / ratesRef.current[fromCurrency]\n    const result = price * ratesRef.current[toCurrency]\n    setToPrice(result.toFixed(3))\n    setFromPrice(value)\n  }\n  const onChangeToPrice = (value) => {\n    const result =\n      (ratesRef.current[fromCurrency] / ratesRef.current[toCurrency]) * value\n    setFromPrice(result.toFixed(3))\n    setToPrice(value)\n  }\n\n  React.useEffect(() => {\n    onChangeFromPrice(fromPrice)\n  }, [fromCurrency])\n\n  React.useEffect(() => {\n    onChangeToPrice(toPrice)\n  }, [toCurrency])\n\n  return (\n    <div className=\"App\">\n      <Block\n        value={fromPrice}\n        currency={fromCurrency}\n        onChangeCurrency={(cur) => setFromCurrency(cur)}\n        onChangeValue={onChangeFromPrice}\n      />\n      <Block\n        value={toPrice}\n        currency={toCurrency}\n        onChangeCurrency={(cur) => setToCurrency(cur)}\n        onChangeValue={onChangeToPrice}\n      />\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"iIAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,SAAtB,CACA,MAAO,cAAP,C,wFAEA,QAASC,IAAT,EAAe,CACb,oBAAwCF,KAAK,CAACG,QAAN,CAAe,KAAf,CAAxC,oDAAOC,YAAP,qBAAqBC,eAArB,qBACA,qBAAoCL,KAAK,CAACG,QAAN,CAAe,KAAf,CAApC,qDAAOG,UAAP,qBAAmBC,aAAnB,qBACA,qBAAkCP,KAAK,CAACG,QAAN,CAAe,CAAf,CAAlC,qDAAOK,SAAP,qBAAkBC,YAAlB,qBACA,qBAA8BT,KAAK,CAACG,QAAN,CAAe,CAAf,CAA9B,qDAAOO,OAAP,qBAAgBC,UAAhB,qBAEA;AACA,GAAMC,SAAQ,CAAGZ,KAAK,CAACa,MAAN,CAAa,EAAb,CAAjB,CACAb,KAAK,CAACc,SAAN,CAAgB,UAAM,CACpBC,KAAK,CAAC,oCAAD,CAAL,CACGC,IADH,CACQ,SAACC,GAAD,QAASA,IAAG,CAACC,IAAJ,EAAT,EADR,EAEGF,IAFH,CAEQ,SAACE,IAAD,CAAU,CACd;AACAN,QAAQ,CAACO,OAAT,CAAmBD,IAAI,CAACE,KAAxB,CACAC,eAAe,CAAC,CAAD,CAAf,CACD,CANH,EAOGC,KAPH,CAOS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,IAAR,CAAaF,GAAb,EACAG,KAAK,CAAC,gCAAD,CAAL,CACD,CAVH,EAWD,CAZD,CAYG,EAZH,EAcA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,KAAD,CAAW,CACnC,GAAMC,MAAK,CAAGD,KAAK,CAAGhB,QAAQ,CAACO,OAAT,CAAiBf,YAAjB,CAAtB,CACA,GAAM0B,OAAM,CAAGD,KAAK,CAAGjB,QAAQ,CAACO,OAAT,CAAiBb,UAAjB,CAAvB,CACAK,UAAU,CAACmB,MAAM,CAACC,OAAP,CAAe,CAAf,CAAD,CAAV,CACAtB,YAAY,CAACmB,KAAD,CAAZ,CACD,CALD,CAMA,GAAMP,gBAAe,CAAG,QAAlBA,gBAAkB,CAACO,KAAD,CAAW,CACjC,GAAME,OAAM,CACTlB,QAAQ,CAACO,OAAT,CAAiBf,YAAjB,EAAiCQ,QAAQ,CAACO,OAAT,CAAiBb,UAAjB,CAAlC,CAAkEsB,KADpE,CAEAnB,YAAY,CAACqB,MAAM,CAACC,OAAP,CAAe,CAAf,CAAD,CAAZ,CACApB,UAAU,CAACiB,KAAD,CAAV,CACD,CALD,CAOA5B,KAAK,CAACc,SAAN,CAAgB,UAAM,CACpBa,iBAAiB,CAACnB,SAAD,CAAjB,CACD,CAFD,CAEG,CAACJ,YAAD,CAFH,EAIAJ,KAAK,CAACc,SAAN,CAAgB,UAAM,CACpBO,eAAe,CAACX,OAAD,CAAf,CACD,CAFD,CAEG,CAACJ,UAAD,CAFH,EAIA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,KAAD,EACE,KAAK,CAAEE,SADT,CAEE,QAAQ,CAAEJ,YAFZ,CAGE,gBAAgB,CAAE,0BAAC4B,GAAD,QAAS3B,gBAAe,CAAC2B,GAAD,CAAxB,EAHpB,CAIE,aAAa,CAAEL,iBAJjB,EADF,cAOE,KAAC,KAAD,EACE,KAAK,CAAEjB,OADT,CAEE,QAAQ,CAAEJ,UAFZ,CAGE,gBAAgB,CAAE,0BAAC0B,GAAD,QAASzB,cAAa,CAACyB,GAAD,CAAtB,EAHpB,CAIE,aAAa,CAAEX,eAJjB,EAPF,GADF,CAgBD,CAED,cAAenB,IAAf"},"metadata":{},"sourceType":"module"}